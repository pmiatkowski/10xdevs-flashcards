---
import { ViewTransitions } from 'astro:transitions';
import Layout from "../layouts/Layout.astro";
import { AccountSettingsSection } from "../components/AccountSettingsSection";
import { ThemeSettingsSection } from "../components/ThemeSettingsSection";

// Get user email from session
const user = Astro.locals.user;
if (!user?.email) {
  return Astro.redirect("/login");
}
---

<Layout title="Settings - AI Flashcards">
  <ViewTransitions />
  <div class="container max-w-5xl mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8" transition:name="page-title">Account Settings</h1>

    <section class="space-y-6">
      <div class="p-4 rounded-lg border bg-card text-card-foreground shadow-sm" transition:animate="fade">
        <h2 class="text-lg font-semibold mb-2">Account Information</h2>
        <p class="text-muted-foreground">Email: {user.email}</p>
      </div>

      <div class="p-4 rounded-lg border bg-card text-card-foreground shadow-sm" transition:animate="fade">
        <ThemeSettingsSection client:load />
      </div>

      <div class="p-4 rounded-lg border bg-card text-card-foreground shadow-sm" transition:animate="fade">
        <AccountSettingsSection client:load />
      </div>
    </section>
  </div>
</Layout>

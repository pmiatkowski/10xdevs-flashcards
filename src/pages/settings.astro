---
import Layout from '../layouts/Layout.astro';
import { AccountSettingsSection } from '../components/AccountSettingsSection';
import { ThemeSettingsSection } from '../components/ThemeSettingsSection';

// Redirect if not authenticated
const session = Astro.locals.session;
if (!session) {
  return Astro.redirect('/login');
}

const userEmail = session.user.email;
---

<Layout title="Settings">
  <main class="container max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl font-bold mb-8">Settings</h1>

    <div class="space-y-8">
      <section class="pb-6 border-b border-border/40">
        <h2 class="text-lg font-semibold mb-4">Account Information</h2>
        <p class="text-foreground/80">{userEmail}</p>
      </section>

      <section class="pb-6 border-b border-border/40">
        <ThemeSettingsSection client:only="react" />
      </section>

      <section>
        <AccountSettingsSection client:load />
      </section>
    </div>
  </main>
</Layout>
